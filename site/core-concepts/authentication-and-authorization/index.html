<!DOCTYPE html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=../..><link href=../common-error-responses-and-their-solutions/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.0"><title>Authentication and authorization - APIDocs</title><link rel=stylesheet href=../../assets/stylesheets/main.618322db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href=../../assets/stylesheets/glightbox.min.css rel=stylesheet><script src=../../assets/javascripts/glightbox.min.js></script><style id=glightbox-style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#authentication-and-authorization class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=APIDocs class="md-header__button md-logo" aria-label=APIDocs data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> APIDocs </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Authentication and authorization </span> </div> </div> </div> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=APIDocs class="md-nav__button md-logo" aria-label=APIDocs data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> </a> APIDocs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Core Concepts </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Core Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Authentication and authorization </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Authentication and authorization </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#generate-token-for-docs-gateway-sts-integration class=md-nav__link> <span class=md-ellipsis> Generate token for Docs Gateway STS integration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../common-error-responses-and-their-solutions/ class=md-nav__link> <span class=md-ellipsis> Common Error Responses and their Solutions </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Guides </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> Docs Creation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Docs Creation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/docs-creation/overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../guides/docs-creation/create-a-new-doc/ class=md-nav__link> <span class=md-ellipsis> Create a new doc </span> </a> </li> <li class=md-nav__item> <a href=../../guides/docs-creation/list-doc-content-and-expiring-content-by-doc-ID/ class=md-nav__link> <span class=md-ellipsis> List Doc contents and expiring content by Docs ID </span> </a> </li> <li class=md-nav__item> <a href=../../guides/docs-creation/retrieve-doc-details-by-doc-id/ class=md-nav__link> <span class=md-ellipsis> Retrieve Doc details by Doc ID </span> </a> </li> <li class=md-nav__item> <a href=../../guides/docs-creation/update-doc-status/ class=md-nav__link> <span class=md-ellipsis> Update Doc Status </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> Docs Update via Lists </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Docs Update via Lists </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/docs-update-via-lists/overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../guides/docs-update-via-lists/add-lists-through-relists-or-content-migration/ class=md-nav__link> <span class=md-ellipsis> Add Lists through Relists or Content Migration </span> </a> </li> <li class=md-nav__item> <a href=../../guides/docs-update-via-lists/cancel-a-specific-doc/ class=md-nav__link> <span class=md-ellipsis> Cancel a Specific Doc </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> API Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> API Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class=md-ellipsis> Docs </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Docs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../api-reference/docs/docs-create/new-doc-create.md class=md-nav__link> <span class=md-ellipsis> Create a new Doc </span> </a> </li> <li class=md-nav__item> <a href=../../api-reference/docs/docs-create/docs-contents-list-by-doc-id/ class=md-nav__link> <span class=md-ellipsis> List doc content and expiring content by doc ID </span> </a> </li> <li class=md-nav__item> <a href=../../api-reference/docs/docs-create/docs-details-retrieve-by-doc-id/ class=md-nav__link> <span class=md-ellipsis> Retrieve doc details by doc ID </span> </a> </li> <li class=md-nav__item> <a href=../../api-reference/docs/docs-create/docs-status-update/ class=md-nav__link> <span class=md-ellipsis> Update Doc Status </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> Lists </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Lists </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../api-reference/docs/lists-update/lists-add-relists-content-migration/ class=md-nav__link> <span class=md-ellipsis> Add Lists through Relists or Content Migration </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#generate-token-for-docs-gateway-sts-integration class=md-nav__link> <span class=md-ellipsis> Generate token for Docs Gateway STS integration </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=authentication-and-authorization>Authentication and authorization<a class=headerlink href=#authentication-and-authorization title="Permanent link">¶</a></h1> <p>Every API request requires an authenticated session. The Docs Gateway service provides an independent interface through which third parties can use Docs services, by implementing authentication through Docs STS (Docs Security Token Service). STS is an OAuth2 server designed to provide the means of authentication, authorization, and accounting for service-to-service communication. STS provides each service with an identity that enables other services to trust it.</p> <ul> <li> <p><strong>Authentication</strong> - Authentication is the act of proving an assertion, to verify the user or the service identity.</p> </li> <li> <p><strong>Authorization</strong> - Authorization is the process of specifying access rights to a user or a service.</p> </li> <li> <p><strong>Scopes</strong> - Scopes provide a way to limit the amount of access that's granted to an access token.</p> </li> </ul> <p>STS ensures that the proper authentication and security measures are in place before interacting with the services that the Docs teams own. Docs STS service provides authentication/authorization/token management and only the scope is managed by the Global Docs service.</p> <h2 id=generate-token-for-docs-gateway-sts-integration>Generate token for Docs Gateway STS integration<a class=headerlink href=#generate-token-for-docs-gateway-sts-integration title="Permanent link">¶</a></h2> <p>To generate an STS token, perform the following steps:</p> <ol> <li>Download <code>generate_token_prod.sh</code> for production</li> <li>Save the script locally to the <code>generate_token.sh</code> file.</li> <li>Run <code>chmod +x ./generate_token_prod.sh</code></li> <li>Copy the <code>Docs Gateway - STS Client</code> secret key for the related environment from 1Password and store it in the <code>sts_private_key.pem</code> file in the same directory where you stored the script.</li> <li> <p>Run this command to generate the token:<br> <code>./generate_token.sh ${ClientId} ${KeyId} sts_private_key.pem (Ex. ./generate_token.sh ft-Docs-gateway-tester 9602ac55-46f0-4296-aea6-a5bfdbd845b9 sts_private_key.pem)</code></p> </li> <li> <p>Add the Authentication header and use the token as value.</p> </li> <li>Create a Docs using Docs Gateway (with Docs STS), Docs Workflow and the Docs Service. Replace <code>ACCESS_TOKEN_GOES_HERE</code>.</li> </ol> <div class=highlight><pre><span></span><code><span class=w>   </span><span class=err>curl</span><span class=w> </span><span class=mi>-</span><span class=err>X</span><span class=w> </span><span class=err>POST</span><span class=w> </span><span class=mi>--</span><span class=err>loca</span><span class=kc>t</span><span class=err>io</span><span class=kc>n</span><span class=w> </span><span class=s2>"http://localhost:8084/v1/docs"</span><span class=w> </span><span class=err>\</span>
<span class=w>    </span><span class=mi>-</span><span class=err>H</span><span class=w> </span><span class=s2>"Accept: application/json"</span><span class=w> </span><span class=err>\</span>
<span class=w>    </span><span class=mi>-</span><span class=err>H</span><span class=w> </span><span class=s2>"Content-Type: application/json"</span><span class=w> </span><span class=err>\</span>
<span class=w>    </span><span class=mi>-</span><span class=err>H</span><span class=w> </span><span class=s2>"Authorization: Bearer ACCESS_TOKEN_GOES_HERE"</span><span class=w> </span><span class=err>\</span>
<span class=w>    </span><span class=mi>-</span><span class=err>d</span><span class=w> </span><span class=s2>"{</span>
<span class=s2>   \"countryCode\": \"PK\",</span>
<span class=s2>   \"description\": \"My first Docs\",</span>
<span class=s2>   \"externalReferenceId\": \"Docs-test\",</span>
<span class=s2>   \"subsidiaryId\": 2</span>
<span class=s2>   }"</span>
</code></pre></div> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["search.suggest", "search.highlight", "content.code.copy", "content.code.annotate", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.e71a0d61.min.js></script> <script id=init-glightbox>const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>